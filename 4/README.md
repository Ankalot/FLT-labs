# LL-преобразования и аппроксимация AST.  
## Запуск  
Запуск программы через `run.bat` (либо вручную через `lua main.lua < path/to/test.txt`), тесты хранятся в папке `tests`.  
  
  
## Описание входа  
Сначала вводится грамматика `G` с следующим синтаксисом:  
```
⟨grammar⟩ ::= ⟨rule⟩⁺
⟨rule⟩ ::= ⟨nterm⟩`->`(⟨term⟩|⟨nterm⟩)*(`|`(⟨term⟩|⟨nterm⟩)⁺)*
⟨term⟩ ::= [A–z]|[0–9]
⟨nterm⟩ ::= `[`[A–z]⁺[0–9]*`]`
```  
С помощью ``` ` ` ``` выделены элементы языка входных данных.
Расстановка пробелов произвольна, могут встречаться табуляции, новая строка может начинаться с \n или с \r\n. Начальный нетерминал — [S].  
  
Примеры правил с эпсилон переходом:  
`A -> `  
`A -> c | `  
`A -> | d`  
`A -> e | | f`  
  
В последней строке вводится строка `T`.  
  
  
## Описание выхода
Если грамматика `G` 'хорошая' и `T` - строка из языка, который описывает `G`, то выводится 
AST аппроксимация для произвольного левостороннего разбора `T` по исходной грамматике `G`.  
Иначе выводится сообщение `The input grammar is not good` (если `G` не 'хорошая') или `The input string is not from the input language` 
(если `T` не входит в язык, который описывает `G`), и программа завершается.  
Пример AST аппроксимации:  
```
--- AST approximation ---
<a> -> {
  <b> -> {
    <b> -> {
      <z> -> {z
        <a> -> {
          <c> -> {c }
          a
        }
      }
      b
      <b> -> {
        <z> -> {z }
        b
      }
    }
    b
    <b> -> {
      <z> -> {z }
      b
    }
  }
  a
}
```
Названия нетерминальных узлов дерева заключены в угловые скобки, терминальные узлы обозначаются без скобоок, списки дочерних узлов заключены в фигурные скобки.   
  
Далее строится и выводится грамматика `G'`.  
Пример:  
```
--- Rules: ---
Start nterm: S
[P] -> z[I]
[VWBZK] -> b[P] | [WV]b[P][WV]
[I] ->  | [DXJY]
[WV] -> z[S][VWBZK] | c[VWBZK]
[YV] -> a | [WV]a
[DXJY] -> zb | z[DXJY]b | zb[DXJY] | z[DXJY]b[DXJY]
[S] -> z[S][YV] | c[YV]
```
Во второй строке указывается начальный нетерминал, синтаксис грамматики как во входе.  
  
Если `G'` - LL(1), то выводится сообщение `This grammar is LL(1)`, иначе `This grammar is not LL(1)`.  
  
Если `G'` - 'хорошая' грамматика, то выводится AST аппроксимация для произвольного левостороннего разбора `T` по грамматике `G'`.  
Иначе выводится сообщение `This grammar is not good`.  
